<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Digital Scrapbook</title>
    <style>
        /* ============================================
           CSS VARIABLES - Easy customization
           ============================================ */
        :root {
            /* Colors */
            --bg-color: #f9f6f0;
            --page-tint: #fefdfb;
            --shadow-color: rgba(0, 0, 0, 0.15);
            --tape-color: rgba(255, 255, 255, 0.6);
            --button-color: #d4a574;
            --button-hover: #c49563;
            
            /* Shadows & effects */
            --shadow-soft: 0 4px 12px var(--shadow-color);
            --shadow-lifted: 0 8px 24px rgba(0, 0, 0, 0.2);
            
            /* Animation timing */
            --flip-duration: 0.8s;
            --stagger-delay: 0.1s;
        }
        
        /* ============================================
           BASE STYLES
           ============================================ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Georgia', 'Garamond', serif;
            background: linear-gradient(135deg, var(--bg-color) 0%, var(--page-tint) 100%);
            min-height: 100vh;
            overflow-x: hidden;
            padding: 20px;
            position: relative;
        }
        
        /* Subtle paper texture overlay */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,.02) 2px, rgba(0,0,0,.02) 4px),
                repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(0,0,0,.02) 2px, rgba(0,0,0,.02) 4px);
            pointer-events: none;
            opacity: 0.3;
            z-index: 1;
        }
        
        /* ============================================
           GALLERY CONTAINER
           ============================================ */
        .gallery {
            max-width: 800px;
            margin: 60px auto 80px;
            position: relative;
            z-index: 2;
            min-height: 80vh;
        }
        
        /* ============================================
           PHOTO CARD STYLES
           Each card has a 3D flip container
           ============================================ */
        .photo-card {
            position: absolute;
            perspective: 1000px;
            /* Individual cards are positioned via inline styles in JS */
        }
        
       .photo-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform var(--flip-duration) ease-in-out;
            transform-style: preserve-3d;
        }
        
        
        /* Front and back faces */
        .photo-front,
        .photo-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 3px;
        }
        
        /* FRONT FACE - Gallery images */
        .photo-front {
            background: white;
            padding: 12px;
            box-shadow: var(--shadow-soft);
            transform: rotateY(0deg);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .photo-front img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            display: block;
            border-radius: 2px;
        }
        
        /* BACK FACE - Seal images */
        .photo-back {
            background: white;
            padding: 12px;
            box-shadow: var(--shadow-soft);
            transform: rotateY(180deg);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .photo-back img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 2px;
        }
        
        /* Tape effect using pseudo-elements */
        .photo-card::before {
            content: '';
            position: absolute;
            width: 60px;
            height: 25px;
            background: var(--tape-color);
            box-shadow: inset 0 0 3px rgba(0,0,0,0.1);
            z-index: 10;
            border-radius: 2px;
        }
        
        /* Vary tape positions per card - set via nth-child */
        .photo-card:nth-child(odd)::before {
            top: -8px;
            left: 50%;
            transform: translateX(-50%) rotate(-2deg);
        }
        
        .photo-card:nth-child(even)::before {
            top: -8px;
            right: 20px;
            transform: rotate(5deg);
        }
        
        .photo-card:nth-child(3n)::before {
            top: -8px;
            left: 20px;
            transform: rotate(-5deg);
        }
        
        /* ============================================
           FLIP BUTTON
           ============================================ */
        .flip-button {
            position: fixed;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 100;
            
            background: var(--button-color);
            color: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            box-shadow: var(--shadow-lifted);
            cursor: pointer;
            
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            
            transition: all 0.3s ease;
        }
        
        .flip-button:hover {
            background: var(--button-hover);
            transform: translateY(-50%) scale(1.1);
        }
        
        .flip-button:active {
            transform: translateY(-50%) scale(0.95);
        }
        
        /* ============================================
           MUSIC CONTROLS
           ============================================ */
        .music-control {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 100;
            
            background: var(--button-color);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            box-shadow: var(--shadow-soft);
            cursor: pointer;
            
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            
            transition: all 0.3s ease;
        }
        
        .music-control:hover {
            background: var(--button-hover);
            transform: scale(1.05);
        }
        
        /* ============================================
           RESPONSIVE ADJUSTMENTS
           ============================================ */
        @media (max-width: 600px) {
            .gallery {
                margin: 40px auto 60px;
            }
            
            .flip-button {
                width: 50px;
                height: 50px;
                font-size: 20px;
                right: 15px;
            }
            
            .music-control {
                width: 45px;
                height: 45px;
                font-size: 18px;
                bottom: 15px;
                right: 15px;
            }
        }
        
        /* ============================================
           LOADING STATE (optional)
           ============================================ */
        .gallery.loading {
            opacity: 0;
        }
        
        .gallery.loaded {
            opacity: 1;
            transition: opacity 0.5s ease;
        }
    </style>
</head>
<body>
    
    <!-- Gallery Container -->
    <div class="gallery loading" id="gallery"></div>
    
    <!-- Flip Button -->
    <button class="flip-button" id="flipButton" aria-label="Flip photos">
        ðŸ”„
    </button>
    
    <!-- Music Control -->
    <button class="music-control" id="musicControl" aria-label="Toggle music">
        ðŸ”Š
    </button>
    
    <!-- Background Music -->
    <audio id="bgMusic" loop>
        <source src=src="Fingerbib.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    
    <script>
        /* ============================================
           IMAGE CONFIGURATION
           TO CHANGE IMAGES: Edit the arrays below
           Replace with your own image filenames
           ============================================ */
        
        // GALLERY IMAGES (front of cards)
        // TO USE YOUR OWN PHOTOS: Replace these URLs with your filenames
        // Example: Change 'https://...' to 'pic1.jpg' after uploading your photos
        const galleryImages = [
            'pic1.jpg',
            'pic2.jpg',
            'pic3.jpg',
            'pic4.jpg',
            'pic5.jpg',
            'pic6.jpg',
            'pic7.jpg',
            'pic8.jpg'
        ];
        
        // SEAL IMAGES (back of cards)
        // TO USE YOUR OWN SEAL PHOTOS: Replace these URLs with your filenames
        // Example: Change 'https://...' to 'seal1.jpg' after uploading your seal photos
        const sealImages = [
            'seal1.jpg',
            'seal2.jpg',
            'seal3.jpg',
            'seal4.jpg',
            'seal5.jpg',
            'seal6.jpg',
            'seal7.jpg',
            'seal8.jpg'
        ];
        
        /* ============================================
           SCRAPBOOK LAYOUT CONFIGURATION
           ============================================ */
        
        // Maximum dimensions for photos (they will scale down if larger)
        const maxPhotoWidth = 280;
        const maxPhotoHeight = 280;
        
        // Rotation range (in degrees) - set to 0 for no rotation
        const minRotation = -8;
        const maxRotation = 8;
        
        // Center clustering configuration
        // These control how tightly photos cluster in the center
        const centerX = 200; // Center point X (adjust based on your screen)
        const centerY = 400; // Center point Y (adjust based on your screen)
        const spreadRadius = 150; // How far from center photos can appear
        
        /* ============================================
           DOM ELEMENTS
           ============================================ */
        const gallery = document.getElementById('gallery');
        const flipButton = document.getElementById('flipButton');
        const musicControl = document.getElementById('musicControl');
        const bgMusic = document.getElementById('bgMusic');
        
        /* ============================================
           MUSIC AUTOPLAY HANDLING
           Mobile Safari/Chrome often blocks autoplay
           This attempts autoplay, then falls back to
           playing on first user interaction
           ============================================ */
        let musicPlaying = false;
        let userInteracted = false;
        
        // Attempt to play music on page load
        function attemptAutoplay() {
            const playPromise = bgMusic.play();
            
            if (playPromise !== undefined) {
                playPromise
                    .then(() => {
                        // Autoplay successful
                        musicPlaying = true;
                        updateMusicIcon();
                    })
                    .catch(error => {
                        // Autoplay blocked - will play on first interaction
                        console.log('Autoplay blocked, waiting for user interaction');
                        musicPlaying = false;
                        updateMusicIcon();
                    });
            }
        }
        
        // Play music on first user interaction
        function playOnInteraction() {
            if (!userInteracted && !musicPlaying) {
                bgMusic.play()
                    .then(() => {
                        musicPlaying = true;
                        updateMusicIcon();
                    })
                    .catch(err => console.log('Could not play audio:', err));
                userInteracted = true;
            }
        }
        
        // Update music icon
        function updateMusicIcon() {
            musicControl.textContent = musicPlaying ? 'ðŸ”Š' : 'ðŸ”‡';
        }
        
        // Toggle music on/off
        musicControl.addEventListener('click', () => {
            if (musicPlaying) {
                bgMusic.pause();
                musicPlaying = false;
            } else {
                bgMusic.play()
                    .then(() => {
                        musicPlaying = true;
                    })
                    .catch(err => console.log('Could not play audio:', err));
            }
            updateMusicIcon();
        });
        
        /* ============================================
           GALLERY GENERATION
           Creates photo cards with centered clustering
           Photos display at their natural size (limited by max dimensions)
           ============================================ */
        function createGallery() {
            const galleryWidth = Math.min(window.innerWidth - 40, 800);
            const galleryHeight = window.innerHeight * 0.8;
            
            galleryImages.forEach((imgSrc, index) => {
                // Create card container
                const card = document.createElement('div');
                card.className = 'photo-card';
                
                // Temporary size - will be updated when image loads
                card.style.width = '250px';
                card.style.height = '250px';
                
                // ============================================
                // MANUAL PHOTO POSITIONS (Two Column Layout)
                // Change x and y values to move photos around
                // x = distance from left edge
                // y = distance from top edge
                // ============================================
                const positions = [
                    { x: 50, y: 50 },     // Photo 1: Left column, row 1
                    { x: 400, y: 50 },    // Photo 2: Right column, row 1
                    { x: 50, y: 250 },    // Photo 3: Left column, row 2
                    { x: 400, y: 250 },   // Photo 4: Right column, row 2
                    { x: 50, y: 450 },    // Photo 5: Left column, row 3
                    { x: 400, y: 450 },   // Photo 6: Right column, row 3
                    { x: 50, y: 650 },    // Photo 7: Left column, row 4
                    { x: 400, y: 650 }    // Photo 8: Right column, row 4
                ];
                
                const x = positions[index].x;
                const y = positions[index].y;
                
                // Random rotation
                const rotation = minRotation + Math.random() * (maxRotation - minRotation);
                
                // Apply position styles
                card.style.left = x + 'px';
                card.style.top = y + 'px';
                
                // Create inner flip container
                const inner = document.createElement('div');
                inner.className = 'photo-inner';
                
                // Apply rotation to the INNER container (not the card)
                // This prevents conflict with the flip animation
                inner.style.transform = `rotate(${rotation}deg)`;
                
                // Store rotation value for flip animation to use
                inner.dataset.rotation = rotation;
                
                // Front face (gallery image)
                const front = document.createElement('div');
                front.className = 'photo-front';
                const frontImg = document.createElement('img');
                frontImg.src = imgSrc;
                frontImg.alt = `Gallery photo ${index + 1}`;
                frontImg.loading = 'lazy';
                
                // When image loads, resize card to match image dimensions
                frontImg.onload = function() {
                    let width = this.naturalWidth;
                    let height = this.naturalHeight;
                    
                    // Scale down if larger than max dimensions
                    if (width > maxPhotoWidth || height > maxPhotoHeight) {
                        const widthRatio = maxPhotoWidth / width;
                        const heightRatio = maxPhotoHeight / height;
                        const ratio = Math.min(widthRatio, heightRatio);
                        
                        width = width * ratio;
                        height = height * ratio;
                    }
                    
                    // Add padding for the white border (12px on each side = 24px total)
                    const cardWidth = width + 24;
                    const cardHeight = height + 24;
                    
                    // Update card dimensions
                    card.style.width = cardWidth + 'px';
                    card.style.height = cardHeight + 'px';
                };
                
                front.appendChild(frontImg);
                
                // Back face (seal image)
                const back = document.createElement('div');
                back.className = 'photo-back';
                const backImg = document.createElement('img');
                backImg.src = sealImages[index % sealImages.length];
                backImg.alt = `Seal photo ${index + 1}`;
                backImg.loading = 'lazy';
                back.appendChild(backImg);
                
                // Assemble card
                inner.appendChild(front);
                inner.appendChild(back);
                card.appendChild(inner);
                gallery.appendChild(card);
            });
            
            // Show gallery after creation
            gallery.classList.remove('loading');
            gallery.classList.add('loaded');
        }
        
        /* ============================================
           FLIP FUNCTIONALITY
           Toggles all cards with staggered animation
           ============================================ */
        let isFlipped = false;
        
        flipButton.addEventListener('click', () => {
            playOnInteraction(); // Attempt to play music on first tap
            
            const cards = document.querySelectorAll('.photo-card');
            
            cards.forEach((card, index) => {
                setTimeout(() => {
                    const inner = card.querySelector('.photo-inner');
                    const rotation = inner.dataset.rotation || 0;
                    
                    if (isFlipped) {
                        // Flip back to front - just rotation
                        inner.style.transform = `rotate(${rotation}deg)`;
                        card.classList.remove('flipped');
                    } else {
                        // Flip to back - combine rotation with flip
                        inner.style.transform = `rotate(${rotation}deg) rotateY(180deg)`;
                        card.classList.add('flipped');
                    }
                }, index * 100); // Stagger by 100ms per card
            });
            
            isFlipped = !isFlipped;
            
            // Animate button
            flipButton.style.transform = 'translateY(-50%) rotate(360deg)';
            setTimeout(() => {
                flipButton.style.transform = 'translateY(-50%) rotate(0deg)';
            }, 600);
        });
        
        /* ============================================
           ENABLE MUSIC ON ANY TAP (mobile fallback)
           ============================================ */
        document.body.addEventListener('click', playOnInteraction, { once: false });
        document.body.addEventListener('touchstart', playOnInteraction, { once: false });
        
        /* ============================================
           INITIALIZATION
           ============================================ */
        window.addEventListener('load', () => {
            createGallery();
            attemptAutoplay();
        });
        
    </script>
</body>
</html>
